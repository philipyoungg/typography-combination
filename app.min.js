!function(t,e,n,a){var o={headline:{type:"text",properties:{fontFamily:["Lato","Playfair Display","Fira Sans"],fontSize:["3rem"],fontWeight:["600"],fontStyle:["normal"],textAlign:["left"],textTransform:["none","uppercase"],color:["#333","mediumblue"],lineHeight:["1.2"],marginBottom:["8px"],letterSpacing:["-0.025em"],text:["Guns, Germs, and Steel"]}},subheadline:{type:"text",properties:{fontFamily:["sans-serif"],fontSize:["1rem"],fontWeight:["400"],fontStyle:["italic"],textAlign:["left"],textTransform:["none"],color:["#666"],lineHeight:["1.2"],marginBottom:["1.5rem"],letterSpacing:["0"],text:["by Jared Diamond"]}},description:{type:"text",properties:{fontFamily:["Roboto","Crimson"],fontSize:["1rem"],fontWeight:["400"],fontStyle:["normal"],textAlign:["left"],textTransform:["none"],color:["#333"],lineHeight:["1.5"],marginBottom:["0"],letterSpacing:["0"],text:["In the 1930s, the Annales School in France undertook the study of long-term historical structures by using a synthesis of geography, history, and sociology. Scholars examined the impact of geography, climate, and land use. Although geography had been nearly eliminated as an academic discipline in the United States after the 1960s, several geography-based historical theories were published in the 1990s."]}}};a.forEach(function(e){return t[e]=a[e]})(a.keys(a));var i="ontouchstart"in e.documentElement&&navigator.userAgent.match(/Mobi/),p=addIndex(forEach),s=compose(toLower,trim),c=compose(map(trim),split(",")),r=function(t){return String(t).replace(/,(?=[^\s])/g,", ")},m=reduce(pipe(xprod,map(unnest)),[[]]),l=lift(map)(compose(zipObj,keys),compose(m,values)),d=compose(values,map(prop("properties")),values),u=lift(zipObj)(keys,compose(map(l),d)),v=memoize(compose(l,u)),h=compose(product,map(length),values,prop("properties")),f=map(compose(zipObj(["properties"]),of)),C=compose(f,map(map(of)),filter(is(Object))),g=v(o),b={app:o,activeComponent:compose(head,keys)(o),combination:g,totalPermutation:length(g),activeCombinationIndex:null},y=function(t){b=merge(b,t)},x={combination:function(t,e){n("#app").empty(),p(function(a,o){n("#app").append(n("<div>").addClass("typography").attr("combination-index",o).on("mouseenter touchstart mouseleave",e.changeActiveCombinationIndex).append(n("<div>").addClass("typography-identifier").append(n("<p>").addClass("typography-identifier__text").text("Combination "+(o+1))).append(n("<p>").addClass("typography-identifier__select").html("iterate this style &rarr;").attr("combination-index",o).css({textDecoration:1===t.totalPermutation?"line-through":""}).on("click",e.reduceToOneCombination))).append(n("<div>").addClass("typography__item").append(n("<div>").append(n.map(keys(a),function(o){return n("<p>").attr("component-name",o).css(a[o]).addClass(""+(t.activeComponent===o?"element-on-focus":"")).text(""+a[o].text).on("click",e.changeActiveComponent)})))))})(t.combination)},activeCombination:function(t,e){n(".active-combination").addClass("loaded");var a=compose(keys,head)(t.combination);n(".active-combination").empty(),n(".active-combination").append(n.map(a,function(a){var o=h(t.app[a]);return n("<div>").addClass("active-combination__item "+(t.activeComponent===a?"is-active":"")).attr("component-name",a).on("click",e.changeActiveComponent).append(n("<p>").addClass("active-combination__identifier").text(a)).append(n("<p>").addClass("active-combination__count").text(o+" "+(o>1?"combinations":"combination")))}))},input:function(t,e,a){var o=150,p=compose(keys,path([t.activeComponent,"properties"]))(t.app);n("#inputs").removeClass("loaded"),t.activeComponent?(n("#empty-state").removeClass("loaded"),setTimeout(function(){n("#inputs").empty(),n("#inputs").append(n.map(p,function(e){var a=path([t.activeComponent,"properties",e])(t.app),o=r(a);return n("<div>").addClass("input-and-label").append(n("<label>").text(e.replace(/([A-Z])/g," $1"))).append(n(""+("text"===e?"<textarea>":"<input>")).text(""+("text"===e?o:"")).attr("value",""+("text"!==e?o:"")).attr("name",e))})),n("input").selectize({plugins:["remove_button","restore_on_backspace"],persist:!0,create:function(t){return{value:t,text:t}},delimiter:","}),a.activeInputItem(t,e),n("input").on("change",e.userInput),n("textarea").on("input",e.userInput),i&&(n(".selectize-input > .item").css({transition:"none"}),n(".selectize-input > .item a").css({transition:"none"})),n("#inputs").addClass("loaded")},o)):setTimeout(function(){n("#empty-state").addClass("loaded")},o)}},I={activeInputItem:function(t){var e=n(".selectize-input > .item"),a=compose(values,path([t.activeCombinationIndex,t.activeComponent]))(t.combination),o=forEach(function(t){e.each(function(e,a){var o=n(a).attr("data-value");s(t)===s(o)&&n(a).addClass("active")})});null===t.activeCombinationIndex?e.removeClass("active"):o(a)},activeComponent:function(t){var e=n("#app .typography__item p");e.removeClass("element-on-focus"),e.each(function(e,a){n(a).attr("component-name")===t.activeComponent&&n(a).addClass("element-on-focus")})}},_={userInput:function(){var t=n(this).val(),e=n(this).attr("name"),a="text"===e?of(t):c(t),o=assocPath(["app",b.activeComponent,"properties",e],a)(b),i=v(o.app),p=merge(o,{combination:i,totalPermutation:length(i)});y(p),x.activeCombination(b,_,I),x.combination(b,_,I)},changeActiveComponent:function(t){var e=n(this).attr("component-name");b.activeComponent!==e&&"typography-identifier__select"!==t.target.className&&(y({activeComponent:e}),I.activeComponent(b,_,I),x.activeCombination(b,_,I),x.input(b,_,I)),t.stopPropagation()},changeActiveCombinationIndex:function(t){var e=n(this).attr("combination-index");y({activeCombinationIndex:"mouseleave"===t.type?null:e}),I.activeInputItem(b)},reduceToOneCombination:function(){var t=n(this).attr("combination-index");if(b.totalPermutation>1){n("#app").removeClass("loaded"),n("#input-container").removeClass("loaded"),n("#credits").removeClass("loaded");var e=C(b.combination[t]),a=v(e);y({totalPermutation:1,activeCombinationIndex:0,app:e,combination:a}),setTimeout(function(){n("#inputs").removeClass("loaded")},200),setTimeout(function(){x.combination(b,_,I),x.activeCombination(b,_,I),x.input(b,_,I),n("#app").addClass("loaded"),n("#input-container").addClass("loaded"),n("#credits").addClass("loaded")},400)}}};n(e).ready(function(){forEach(function(t){return t(b,_,I)},values(x)),n("#input-container").on("touchstart",_.changeActiveCombinationIndex),n("#app").on("click",_.changeActiveComponent),n("#app").addClass("loaded")})}(window,document,$,R);
