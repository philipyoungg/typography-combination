!function(t,e,a,o){o.forEach(function(t){return e[t]=o[t]})(o.keys(o));var n={title:{type:"text",properties:{fontFamily:["Lato","Playfair Display","Fira Sans"],fontSize:["3rem"],fontWeight:["600"],fontStyle:["normal"],textAlign:["left"],textTransform:["none","uppercase"],color:["#333","mediumblue"],lineHeight:["1.2"],marginBottom:["8px"],letterSpacing:["-0.025em"],text:["Guns, Germs, and Steel"]}},metatitle:{type:"text",properties:{fontFamily:["sans-serif"],fontSize:["1rem"],fontWeight:["400"],fontStyle:["italic"],textAlign:["left"],textTransform:["none"],color:["#666"],lineHeight:["1.2"],marginBottom:["1.5rem"],letterSpacing:["0"],text:["by Jared Diamond"]}},description:{type:"text",properties:{fontFamily:["Roboto","Crimson"],fontSize:["1rem"],fontWeight:["400"],fontStyle:["normal"],textAlign:["left"],textTransform:["none"],color:["#333"],lineHeight:["1.5"],marginBottom:["0"],letterSpacing:["0"],text:["In the 1930s, the Annales School in France undertook the study of long-term historical structures by using a synthesis of geography, history, and sociology. Scholars examined the impact of geography, climate, and land use. Although geography had been nearly eliminated as an academic discipline in the United States after the 1960s, several geography-based historical theories were published in the 1990s."]}}},i="ontouchstart"in t.documentElement&&navigator.userAgent.match(/Mobi/),s=unapply(lift(reduce(pipe(xprod,map(flatten))))(head,tail)),p=function(t){return String(t).replace(/,(?=[^\s])/g,", ")},r=converge(map,[compose(zipObj,keys),compose(apply(s),values)]),c=converge(zipObj,[compose(keys),compose(map(r),values,map(prop("properties")),values)]),m=memoize(compose(r,c)),l=compose(reduce(multiply,1),map(length),values,prop("properties")),d=map(compose(zipObj(["properties"]),of)),u=compose(d,map(map(of)),filter(is(Object))),f=compose(toLower,trim),v=m(n),h={app:n,activeComponent:compose(head,keys)(n),component:keys(n),combination:v,totalPermutation:v.length,activeCombinationIndex:null},y=function(){a("#app").empty(),console.log(h.totalPermutation),h.combination.forEach(function(t,e){a("#app").append(a("<div>").addClass("typography").attr("combination-index",e).on("mouseenter touchstart mouseleave",k).append(a("<div>").addClass("typography-identifier").append(a("<p>").addClass("typography-identifier__text").text("Artboard "+(e+1))).append(a("<p>").addClass("typography-identifier__select").html("iterate this style &rarr;").attr("combination-index",e).css({textDecoration:1===h.totalPermutation?"line-through":""}).on("click",I))).append(a("<div>").addClass("typography__item").append(a("<div>").append(a.map(h.component,function(e){return a("<p>").attr("component-name",e).css(t[e]).addClass(""+(h.activeComponent===e?"element-on-focus":"")).text(""+t[e].text).on("click",S)})))))})},g=function(){a(".active-combination").empty(),a(".active-combination").append(a.map(h.component,function(t){var e=l(h.app[t]);return a("<div>").addClass("active-combination__item "+(h.activeComponent===t?"is-active":"")).attr("component-name",t).on("click",S).append(a("<p>").addClass("active-combination__identifier").text(t)).append(a("<p>").addClass("active-combination__count").text(e+" "+(e>1?"combinations":"combination")))}))},C=function(){var t=compose(keys,path(["app",h.activeComponent,"properties"]))(h);g(),a("#inputs").removeClass("loaded"),h.activeComponent?(a("#empty-state").removeClass("loaded"),setTimeout(function(){a("#inputs").empty(),a("#inputs").append(a.map(t,function(t){var e=p(h.app[h.activeComponent].properties[t]);return a("<div>").css({marginBottom:"0.75rem"}).append(a("<label>").text(t.replace(/([A-Z])/g," $1"))).append(a(""+("text"===t?"<textarea>":"<input>")).text(""+("text"===t?e:"")).attr("value",""+("text"!==t?e:"")).attr("name",t))})),a("input").selectize({plugins:["remove_button","restore_on_backspace"],persist:!0,create:function(t){return{value:t,text:t}},delimiter:","}),b.activeInputItem(),a("input").on("change",_),a("textarea").on("input",_),i&&(a(".selectize-input > .item").css({transition:"none"}),a(".selectize-input > .item a").css({transition:"none"})),a("#inputs").addClass("loaded")},150)):setTimeout(function(){a("#empty-state").addClass("loaded")},150)},b={activeInputItem:function(){var t=a(".selectize-input > .item"),e=compose(values,path([h.activeCombinationIndex,h.activeComponent]))(h.combination),o=forEach(function(e){t.each(function(t,o){f(e)===f(a(o).attr("data-value"))&&a(o).addClass("active")})});ifElse(isNil,always(t.removeClass("active")),always(o(e)))(h.activeCombinationIndex)},activeComponentProperties:function(){var t=a("#app .typography__item p");t.removeClass("element-on-focus"),t.each(function(t,e){a(e).attr("component-name")===h.activeComponent&&a(e).addClass("element-on-focus")})}},x=function(){C(),y()},_=function(){var t=a(this).val(),e=a(this).attr("name"),o="text"===e?of(t):split(",",trim(t));h=assocPath(["app",h.activeComponent,"properties",e],o)(h),h=assoc("combination",m(h.app))(h),h=assoc("totalPermutation",length(h.combination))(h),g(),y()},S=function(t){var e=a(this).attr("component-name");h.activeComponent!==e&&("typography-identifier__select"!==t.target.className&&(h=assoc("activeComponent",e)(h)),b.activeComponentProperties(),C()),t.stopPropagation()},k=function(t){var e=a(this).attr("combination-index");h=assoc("activeCombinationIndex",ifElse(propEq("type","mouseleave"),always(null),always(e))(t))(h),b.activeInputItem()},I=function(){var t=a(this).attr("combination-index");h.totalPermutation>1&&(h=assoc("totalPermutation",1)(h),h=assoc("activeCombinationIndex",0)(h),a("#app").removeClass("loaded"),a("#input-container").removeClass("loaded"),a("#credits").removeClass("loaded"),setTimeout(function(){h=assoc("app",u(h.combination[t]))(h),h=assoc("combination",m(h.app))(h),h=assoc("totalPermutation",length(h.combination))(h),y(),C(),a("#app").addClass("loaded"),a("#input-container").addClass("loaded"),a("#credits").addClass("loaded")},400))};a(t).ready(function(){x(),a("#input-container").on("touchstart",k),a("#app").on("click",S),setTimeout(function(){a("#app").addClass("loaded"),a("#input-container").addClass("loaded"),a("#inputs").addClass("loaded"),a("#credits").addClass("loaded")},100)})}(document,window,$,R);
